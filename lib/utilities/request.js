"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get deleteRequest () {
        return deleteRequest;
    },
    get getRequest () {
        return getRequest;
    },
    get patchRequest () {
        return patchRequest;
    },
    get postRequest () {
        return postRequest;
    }
});
var _stream = require("stream");
var _necessary = require("necessary");
var _constants = require("../constants");
var _headers = require("../utilities/headers");
var createRequest = _necessary.requestUtilities.createRequest, GET_METHOD = _necessary.methods.GET_METHOD, POST_METHOD = _necessary.methods.POST_METHOD, DELETE_METHOD = _necessary.methods.DELETE_METHOD, PATCH_METHOD = _necessary.methods.PATCH_METHOD;
function getRequest(uri, query, userAgent, clientId, clientSecret, callback) {
    var host = _constants.GITHUB_API_HOST, method = GET_METHOD, headers = (0, _headers.headersFromUserAgentClientIdAndClientSecret)(userAgent, clientId, clientSecret), request = createRequest(host, uri, query, method, headers, function(error, response) {
        contentFromResponse(response, function(content) {
            var jsonString = content, json = JSON.parse(jsonString);
            callback(error, json);
        });
    });
    request.end();
}
function postRequest(uri, query, content, userAgent, gitHubAccessToken, callback) {
    var host = _constants.GITHUB_API_HOST, method = POST_METHOD, headers = (0, _headers.headersFromUserAgentAndGitHubAccessToken)(userAgent, gitHubAccessToken), postRequest = createRequest(host, uri, query, method, headers, function(error, response) {
        contentFromResponse(response, function(content) {
            var jsonString = content, json = JSON.parse(jsonString);
            callback(error, json);
        });
    }), readable = _stream.Readable.from(content);
    readable.pipe(postRequest);
}
function patchRequest(uri, query, content, userAgent, gitHubAccessToken, callback) {
    var host = _constants.GITHUB_API_HOST, method = PATCH_METHOD, headers = (0, _headers.headersFromUserAgentAndGitHubAccessToken)(userAgent, gitHubAccessToken), postRequest = createRequest(host, uri, query, method, headers, function(error, response) {
        contentFromResponse(response, function(content) {
            var jsonString = content, json = JSON.parse(jsonString);
            callback(error, json);
        });
    }), readable = _stream.Readable.from(content);
    readable.pipe(postRequest);
}
function deleteRequest(uri, query, userAgent, gitHubAccessToken, callback) {
    var host = _constants.GITHUB_API_HOST, method = DELETE_METHOD, headers = (0, _headers.headersFromUserAgentAndGitHubAccessToken)(userAgent, gitHubAccessToken), deleteRequest = createRequest(host, uri, query, method, headers, function(error, response) {
        contentFromResponse(response, function(content) {
            var string = content; ///
            callback(error, string);
        });
    });
    deleteRequest.end();
}
function contentFromResponse(response, callback) {
    var content = _constants.EMPTY_STRING;
    response.on(_constants.DATA, function(data) {
        content += data;
    });
    response.on(_constants.END, function() {
        callback(content);
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsaXRpZXMvcmVxdWVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IHsgUmVhZGFibGUgfSBmcm9tIFwic3RyZWFtXCI7XG5pbXBvcnQgeyBtZXRob2RzLCByZXF1ZXN0VXRpbGl0aWVzIH0gZnJvbSBcIm5lY2Vzc2FyeVwiO1xuXG5pbXBvcnQgeyBFTkQsIERBVEEsIEVNUFRZX1NUUklORywgR0lUSFVCX0FQSV9IT1NUIH0gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgaGVhZGVyc0Zyb21Vc2VyQWdlbnRBbmRHaXRIdWJBY2Nlc3NUb2tlbiwgaGVhZGVyc0Zyb21Vc2VyQWdlbnRDbGllbnRJZEFuZENsaWVudFNlY3JldCB9IGZyb20gXCIuLi91dGlsaXRpZXMvaGVhZGVyc1wiO1xuXG5jb25zdCB7IGNyZWF0ZVJlcXVlc3QgfSA9IHJlcXVlc3RVdGlsaXRpZXMsXG4gICAgICB7IEdFVF9NRVRIT0QsIFBPU1RfTUVUSE9ELCBERUxFVEVfTUVUSE9ELCBQQVRDSF9NRVRIT0QgfSA9IG1ldGhvZHM7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZXF1ZXN0KHVyaSwgcXVlcnksIHVzZXJBZ2VudCwgY2xpZW50SWQsIGNsaWVudFNlY3JldCwgY2FsbGJhY2spIHtcbiAgY29uc3QgaG9zdCA9IEdJVEhVQl9BUElfSE9TVCxcbiAgICAgICAgbWV0aG9kID0gR0VUX01FVEhPRCxcbiAgICAgICAgaGVhZGVycyA9IGhlYWRlcnNGcm9tVXNlckFnZW50Q2xpZW50SWRBbmRDbGllbnRTZWNyZXQodXNlckFnZW50LCBjbGllbnRJZCwgY2xpZW50U2VjcmV0KSxcbiAgICAgICAgcmVxdWVzdCA9IGNyZWF0ZVJlcXVlc3QoaG9zdCwgdXJpLCBxdWVyeSwgbWV0aG9kLCBoZWFkZXJzLCAoZXJyb3IsIHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgY29udGVudEZyb21SZXNwb25zZShyZXNwb25zZSwgKGNvbnRlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGpzb25TdHJpbmcgPSBjb250ZW50LCAgLy8vXG4gICAgICAgICAgICAgICAgICBqc29uID0gSlNPTi5wYXJzZShqc29uU3RyaW5nKTtcblxuICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IsIGpzb24pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICByZXF1ZXN0LmVuZCgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcG9zdFJlcXVlc3QodXJpLCBxdWVyeSwgY29udGVudCwgdXNlckFnZW50LCBnaXRIdWJBY2Nlc3NUb2tlbiwgY2FsbGJhY2spIHtcbiAgY29uc3QgaG9zdCA9IEdJVEhVQl9BUElfSE9TVCxcbiAgICAgICAgbWV0aG9kID0gUE9TVF9NRVRIT0QsXG4gICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzRnJvbVVzZXJBZ2VudEFuZEdpdEh1YkFjY2Vzc1Rva2VuKHVzZXJBZ2VudCwgZ2l0SHViQWNjZXNzVG9rZW4pLFxuICAgICAgICBwb3N0UmVxdWVzdCA9IGNyZWF0ZVJlcXVlc3QoaG9zdCwgdXJpLCBxdWVyeSwgbWV0aG9kLCBoZWFkZXJzLCAoZXJyb3IsIHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgY29udGVudEZyb21SZXNwb25zZShyZXNwb25zZSwgKGNvbnRlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGpzb25TdHJpbmcgPSBjb250ZW50LCAgLy8vXG4gICAgICAgICAgICAgICAgICBqc29uID0gSlNPTi5wYXJzZShqc29uU3RyaW5nKTtcblxuICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IsIGpzb24pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KSxcbiAgICAgICAgcmVhZGFibGUgPSBSZWFkYWJsZS5mcm9tKGNvbnRlbnQpO1xuXG4gIHJlYWRhYmxlLnBpcGUocG9zdFJlcXVlc3QpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGF0Y2hSZXF1ZXN0KHVyaSwgcXVlcnksIGNvbnRlbnQsIHVzZXJBZ2VudCwgZ2l0SHViQWNjZXNzVG9rZW4sIGNhbGxiYWNrKSB7XG4gIGNvbnN0IGhvc3QgPSBHSVRIVUJfQVBJX0hPU1QsXG4gICAgICAgIG1ldGhvZCA9IFBBVENIX01FVEhPRCxcbiAgICAgICAgaGVhZGVycyA9IGhlYWRlcnNGcm9tVXNlckFnZW50QW5kR2l0SHViQWNjZXNzVG9rZW4odXNlckFnZW50LCBnaXRIdWJBY2Nlc3NUb2tlbiksXG4gICAgICAgIHBvc3RSZXF1ZXN0ID0gY3JlYXRlUmVxdWVzdChob3N0LCB1cmksIHF1ZXJ5LCBtZXRob2QsIGhlYWRlcnMsIChlcnJvciwgcmVzcG9uc2UpID0+IHtcbiAgICAgICAgICBjb250ZW50RnJvbVJlc3BvbnNlKHJlc3BvbnNlLCAoY29udGVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QganNvblN0cmluZyA9IGNvbnRlbnQsICAvLy9cbiAgICAgICAgICAgICAgICAgIGpzb24gPSBKU09OLnBhcnNlKGpzb25TdHJpbmcpO1xuXG4gICAgICAgICAgICBjYWxsYmFjayhlcnJvciwganNvbik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pLFxuICAgICAgICByZWFkYWJsZSA9IFJlYWRhYmxlLmZyb20oY29udGVudCk7XG5cbiAgcmVhZGFibGUucGlwZShwb3N0UmVxdWVzdCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVSZXF1ZXN0KHVyaSwgcXVlcnksIHVzZXJBZ2VudCwgZ2l0SHViQWNjZXNzVG9rZW4sIGNhbGxiYWNrKSB7XG4gIGNvbnN0IGhvc3QgPSBHSVRIVUJfQVBJX0hPU1QsXG4gICAgICAgIG1ldGhvZCA9IERFTEVURV9NRVRIT0QsXG4gICAgICAgIGhlYWRlcnMgPSBoZWFkZXJzRnJvbVVzZXJBZ2VudEFuZEdpdEh1YkFjY2Vzc1Rva2VuKHVzZXJBZ2VudCwgZ2l0SHViQWNjZXNzVG9rZW4pLFxuICAgICAgICBkZWxldGVSZXF1ZXN0ID0gY3JlYXRlUmVxdWVzdChob3N0LCB1cmksIHF1ZXJ5LCBtZXRob2QsIGhlYWRlcnMsIChlcnJvciwgcmVzcG9uc2UpID0+IHtcbiAgICAgICAgICBjb250ZW50RnJvbVJlc3BvbnNlKHJlc3BvbnNlLCAoY29udGVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3RyaW5nID0gY29udGVudDsgIC8vL1xuXG4gICAgICAgICAgICBjYWxsYmFjayhlcnJvciwgc3RyaW5nKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgZGVsZXRlUmVxdWVzdC5lbmQoKTtcbn1cblxuZnVuY3Rpb24gY29udGVudEZyb21SZXNwb25zZShyZXNwb25zZSwgY2FsbGJhY2spIHtcbiAgbGV0IGNvbnRlbnQgPSBFTVBUWV9TVFJJTkc7XG5cbiAgcmVzcG9uc2Uub24oREFUQSwgKGRhdGEpID0+IHtcbiAgICBjb250ZW50ICs9IGRhdGE7XG4gIH0pO1xuXG4gIHJlc3BvbnNlLm9uKEVORCwgKCkgPT4ge1xuICAgIGNhbGxiYWNrKGNvbnRlbnQpO1xuICB9KTtcbn1cbiJdLCJuYW1lcyI6WyJkZWxldGVSZXF1ZXN0IiwiZ2V0UmVxdWVzdCIsInBhdGNoUmVxdWVzdCIsInBvc3RSZXF1ZXN0IiwiY3JlYXRlUmVxdWVzdCIsInJlcXVlc3RVdGlsaXRpZXMiLCJHRVRfTUVUSE9EIiwibWV0aG9kcyIsIlBPU1RfTUVUSE9EIiwiREVMRVRFX01FVEhPRCIsIlBBVENIX01FVEhPRCIsInVyaSIsInF1ZXJ5IiwidXNlckFnZW50IiwiY2xpZW50SWQiLCJjbGllbnRTZWNyZXQiLCJjYWxsYmFjayIsImhvc3QiLCJHSVRIVUJfQVBJX0hPU1QiLCJtZXRob2QiLCJoZWFkZXJzIiwiaGVhZGVyc0Zyb21Vc2VyQWdlbnRDbGllbnRJZEFuZENsaWVudFNlY3JldCIsInJlcXVlc3QiLCJlcnJvciIsInJlc3BvbnNlIiwiY29udGVudEZyb21SZXNwb25zZSIsImNvbnRlbnQiLCJqc29uU3RyaW5nIiwianNvbiIsIkpTT04iLCJwYXJzZSIsImVuZCIsImdpdEh1YkFjY2Vzc1Rva2VuIiwiaGVhZGVyc0Zyb21Vc2VyQWdlbnRBbmRHaXRIdWJBY2Nlc3NUb2tlbiIsInJlYWRhYmxlIiwiUmVhZGFibGUiLCJmcm9tIiwicGlwZSIsInN0cmluZyIsIkVNUFRZX1NUUklORyIsIm9uIiwiREFUQSIsImRhdGEiLCJFTkQiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7OztRQTZEZ0JBO2VBQUFBOztRQWxEQUM7ZUFBQUE7O1FBaUNBQztlQUFBQTs7UUFqQkFDO2VBQUFBOzs7c0JBekJTO3lCQUNpQjt5QkFFZTt1QkFDNkM7QUFFdEcsSUFBTSxBQUFFQyxnQkFBa0JDLDJCQUFnQixDQUFsQ0QsZUFDQUUsYUFBeURDLGtCQUFPLENBQWhFRCxZQUFZRSxjQUE2Q0Qsa0JBQU8sQ0FBcERDLGFBQWFDLGdCQUFnQ0Ysa0JBQU8sQ0FBdkNFLGVBQWVDLGVBQWlCSCxrQkFBTyxDQUF4Qkc7QUFFekMsU0FBU1QsV0FBV1UsR0FBRyxFQUFFQyxLQUFLLEVBQUVDLFNBQVMsRUFBRUMsUUFBUSxFQUFFQyxZQUFZLEVBQUVDLFFBQVE7SUFDaEYsSUFBTUMsT0FBT0MsMEJBQWUsRUFDdEJDLFNBQVNiLFlBQ1RjLFVBQVVDLElBQUFBLG9EQUEyQyxFQUFDUixXQUFXQyxVQUFVQyxlQUMzRU8sVUFBVWxCLGNBQWNhLE1BQU1OLEtBQUtDLE9BQU9PLFFBQVFDLFNBQVMsU0FBQ0csT0FBT0M7UUFDakVDLG9CQUFvQkQsVUFBVSxTQUFDRTtZQUM3QixJQUFNQyxhQUFhRCxTQUNiRSxPQUFPQyxLQUFLQyxLQUFLLENBQUNIO1lBRXhCWCxTQUFTTyxPQUFPSztRQUNsQjtJQUNGO0lBRU5OLFFBQVFTLEdBQUc7QUFDYjtBQUVPLFNBQVM1QixZQUFZUSxHQUFHLEVBQUVDLEtBQUssRUFBRWMsT0FBTyxFQUFFYixTQUFTLEVBQUVtQixpQkFBaUIsRUFBRWhCLFFBQVE7SUFDckYsSUFBTUMsT0FBT0MsMEJBQWUsRUFDdEJDLFNBQVNYLGFBQ1RZLFVBQVVhLElBQUFBLGlEQUF3QyxFQUFDcEIsV0FBV21CLG9CQUM5RDdCLGNBQWNDLGNBQWNhLE1BQU1OLEtBQUtDLE9BQU9PLFFBQVFDLFNBQVMsU0FBQ0csT0FBT0M7UUFDckVDLG9CQUFvQkQsVUFBVSxTQUFDRTtZQUM3QixJQUFNQyxhQUFhRCxTQUNiRSxPQUFPQyxLQUFLQyxLQUFLLENBQUNIO1lBRXhCWCxTQUFTTyxPQUFPSztRQUNsQjtJQUNGLElBQ0FNLFdBQVdDLGdCQUFRLENBQUNDLElBQUksQ0FBQ1Y7SUFFL0JRLFNBQVNHLElBQUksQ0FBQ2xDO0FBQ2hCO0FBRU8sU0FBU0QsYUFBYVMsR0FBRyxFQUFFQyxLQUFLLEVBQUVjLE9BQU8sRUFBRWIsU0FBUyxFQUFFbUIsaUJBQWlCLEVBQUVoQixRQUFRO0lBQ3RGLElBQU1DLE9BQU9DLDBCQUFlLEVBQ3RCQyxTQUFTVCxjQUNUVSxVQUFVYSxJQUFBQSxpREFBd0MsRUFBQ3BCLFdBQVdtQixvQkFDOUQ3QixjQUFjQyxjQUFjYSxNQUFNTixLQUFLQyxPQUFPTyxRQUFRQyxTQUFTLFNBQUNHLE9BQU9DO1FBQ3JFQyxvQkFBb0JELFVBQVUsU0FBQ0U7WUFDN0IsSUFBTUMsYUFBYUQsU0FDYkUsT0FBT0MsS0FBS0MsS0FBSyxDQUFDSDtZQUV4QlgsU0FBU08sT0FBT0s7UUFDbEI7SUFDRixJQUNBTSxXQUFXQyxnQkFBUSxDQUFDQyxJQUFJLENBQUNWO0lBRS9CUSxTQUFTRyxJQUFJLENBQUNsQztBQUNoQjtBQUVPLFNBQVNILGNBQWNXLEdBQUcsRUFBRUMsS0FBSyxFQUFFQyxTQUFTLEVBQUVtQixpQkFBaUIsRUFBRWhCLFFBQVE7SUFDOUUsSUFBTUMsT0FBT0MsMEJBQWUsRUFDdEJDLFNBQVNWLGVBQ1RXLFVBQVVhLElBQUFBLGlEQUF3QyxFQUFDcEIsV0FBV21CLG9CQUM5RGhDLGdCQUFnQkksY0FBY2EsTUFBTU4sS0FBS0MsT0FBT08sUUFBUUMsU0FBUyxTQUFDRyxPQUFPQztRQUN2RUMsb0JBQW9CRCxVQUFVLFNBQUNFO1lBQzdCLElBQU1ZLFNBQVNaLFNBQVUsR0FBRztZQUU1QlYsU0FBU08sT0FBT2U7UUFDbEI7SUFDRjtJQUVOdEMsY0FBYytCLEdBQUc7QUFDbkI7QUFFQSxTQUFTTixvQkFBb0JELFFBQVEsRUFBRVIsUUFBUTtJQUM3QyxJQUFJVSxVQUFVYSx1QkFBWTtJQUUxQmYsU0FBU2dCLEVBQUUsQ0FBQ0MsZUFBSSxFQUFFLFNBQUNDO1FBQ2pCaEIsV0FBV2dCO0lBQ2I7SUFFQWxCLFNBQVNnQixFQUFFLENBQUNHLGNBQUcsRUFBRTtRQUNmM0IsU0FBU1U7SUFDWDtBQUNGIn0=